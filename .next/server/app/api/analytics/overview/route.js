(()=>{var e={};e.id=705,e.ids=[705],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},15206:e=>{"use strict";e.exports=require("zlib")},24904:()=>{},45836:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>_,routeModule:()=>E,serverHooks:()=>R,staticGenerationAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{GET:()=>d});var i=r(49303),o=r(88716),a=r(60670),n=r(75571),c=r(90455),u=r(83493),l=r(31402),p=r(57435);async function d(){try{let e=await (0,n.getServerSession)(c.L),t=e?.user?.id;if(!t)return(0,l.w)({error:"Unauthorized"},{status:401});let[r,s,i,o,a]=await Promise.all([u._.deadline.count({where:{userId:t}}),u._.deadline.count({where:{userId:t,status:"COMPLETED"}}),u._.deadline.count({where:{userId:t,status:"OVERDUE"}}),u._.deadline.groupBy({by:["priority"],where:{userId:t},_count:{_all:!0}}),u._.$queryRaw`
        SELECT
          COUNT(*) FILTER (WHERE "completedAt" <= "dueDate")::int AS on_time,
          COUNT(*)::int AS total_completed,
          AVG(EXTRACT(EPOCH FROM ("completedAt" - "dueDate"))) AS avg_delay_seconds
        FROM "Deadline"
        WHERE "userId" = ${t} AND "status" = 'COMPLETED'
      `]),p=a[0]??{on_time:0,total_completed:0,avg_delay_seconds:null},d=p.total_completed>0?p.on_time/p.total_completed*100:0,E=p.avg_delay_seconds?p.avg_delay_seconds/3600:0,_=o.map(e=>({priority:e.priority,count:e._count._all}));return(0,l.w)({data:{totalCount:r,completedCount:s,overdueCount:i,onTimePercent:d,avgDelayHours:E,priorityDistribution:_}},{cacheControl:"private, max-age=60, stale-while-revalidate=120"})}catch(e){return(0,p.H)("analytics.overview.failed",{error:String(e)}),(0,l.w)({error:"Internal server error"},{status:500})}}let E=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/analytics/overview/route",pathname:"/api/analytics/overview",filename:"route",bundlePath:"app/api/analytics/overview/route"},resolvedPagePath:"/home/adarsh/Documents/New_folder/Deadline Planner/app/api/analytics/overview/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:_,staticGenerationAsyncStorage:v,serverHooks:R}=E,m="/api/analytics/overview/route";function x(){return(0,a.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:v})}},90455:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var s=r(14029),i=r(77234),o=r(13539),a=r(83493);let n=[];process.env.EMAIL_SERVER_HOST&&process.env.EMAIL_SERVER_PORT&&process.env.EMAIL_SERVER_USER&&process.env.EMAIL_SERVER_PASSWORD&&process.env.EMAIL_FROM&&n.push((0,s.Z)({server:{host:process.env.EMAIL_SERVER_HOST,port:Number(process.env.EMAIL_SERVER_PORT),auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM})),process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET&&n.push((0,i.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}));let c={adapter:(0,o.N)(a._),providers:n,session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id),e)}}},31402:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var s=r(87070);function i(e,t){let r={};return t?.cacheControl&&(r["Cache-Control"]=t.cacheControl),s.NextResponse.json(e,{status:t?.status??200,headers:r})}},57435:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});let s=(e,t)=>(function(e,t,r){let s={level:e,message:t,...r?{meta:r}:{}};console[e](JSON.stringify(s))})("error",e,t)},83493:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});let s=require("@prisma/client"),i=global.prisma??new s.PrismaClient({log:["error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972,65],()=>r(45836));module.exports=s})();