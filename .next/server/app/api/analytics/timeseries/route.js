(()=>{var e={};e.id=37,e.ids=[37],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},15206:e=>{"use strict";e.exports=require("zlib")},24904:()=>{},50802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>m,requestAsyncStorage:()=>R,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>_});var s={};r.r(s),r.d(s,{GET:()=>E});var i=r(49303),a=r(88716),n=r(60670),o=r(75571),u=r(90455),c=r(83493),p=r(31402),l=r(57435);async function E(){try{let e=await (0,o.getServerSession)(u.L),t=e?.user?.id;if(!t)return(0,p.w)({error:"Unauthorized"},{status:401});let r=await c._.$queryRaw`
      SELECT
        DATE_TRUNC('week', "completedAt")::date AS week_start,
        COUNT(*)::int AS completed
      FROM "Deadline"
      WHERE "userId" = ${t} AND "status" = 'COMPLETED'
      GROUP BY week_start
      ORDER BY week_start ASC
    `;return(0,p.w)({data:r},{cacheControl:"private, max-age=120, stale-while-revalidate=240"})}catch(e){return(0,l.H)("analytics.timeseries.failed",{error:String(e)}),(0,p.w)({error:"Internal server error"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/analytics/timeseries/route",pathname:"/api/analytics/timeseries",filename:"route",bundlePath:"app/api/analytics/timeseries/route"},resolvedPagePath:"/home/adarsh/Documents/New_folder/Deadline Planner/app/api/analytics/timeseries/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:R,staticGenerationAsyncStorage:_,serverHooks:v}=d,x="/api/analytics/timeseries/route";function m(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:_})}},90455:(e,t,r)=>{"use strict";r.d(t,{L:()=>u});var s=r(14029),i=r(77234),a=r(13539),n=r(83493);let o=[];process.env.EMAIL_SERVER_HOST&&process.env.EMAIL_SERVER_PORT&&process.env.EMAIL_SERVER_USER&&process.env.EMAIL_SERVER_PASSWORD&&process.env.EMAIL_FROM&&o.push((0,s.Z)({server:{host:process.env.EMAIL_SERVER_HOST,port:Number(process.env.EMAIL_SERVER_PORT),auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM})),process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET&&o.push((0,i.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}));let u={adapter:(0,a.N)(n._),providers:o,session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id),e)}}},31402:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var s=r(87070);function i(e,t){let r={};return t?.cacheControl&&(r["Cache-Control"]=t.cacheControl),s.NextResponse.json(e,{status:t?.status??200,headers:r})}},57435:(e,t,r)=>{"use strict";r.d(t,{H:()=>s});let s=(e,t)=>(function(e,t,r){let s={level:e,message:t,...r?{meta:r}:{}};console[e](JSON.stringify(s))})("error",e,t)},83493:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});let s=require("@prisma/client"),i=global.prisma??new s.PrismaClient({log:["error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972,65],()=>r(50802));module.exports=s})();